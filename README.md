# News Analysis & Query Agent

An AI backend service for natural language querying and summarization of a news articles dataset.

## Features

* Preprocesses news data with tokenization, stopword removal, and entity extraction.
* Provides semantic search over news content using SentenceTransformers + Chroma vector DB.
* Answers natural language questions using a Groq-powered LLM.
* Generates and executes pandas code for complex data queries.
* Returns statistical summaries and insights on news categories, authors, and publication dates.
* Supports abstractive summarization of news text using transformer models.
* FastAPI server for easy REST API integration.

## Setup

1. Clone the repository:

   ```bash
   git clone https://github.com/yourusername/news-analysis-agent.git
   cd news-analysis-agent
   ```

2. Create and activate a Python virtual environment (recommended):

   ```bash
   python3 -m venv venv
   source venv/bin/activate     # On Windows: venv\Scripts\activate
   ```

3. Install dependencies:

   ```bash
   pip install -r requirements.txt
   ```

4. Set your Groq API key as an environment variable:

   ```bash
   export GROQ_API_KEY=Your_Groq_Api_Key       # macOS/Linux
   set GROQ_API_KEY=Your_Groq_Api_Key          # Windows CMD
   $Env:GROQ_API_KEY="Your_Groq_Api_Key"       # Windows PowerShell
   ```

5. Ensure your news dataset CSV is at `data/cleaned_news_data.csv`. If not, update the path in `app/main.py`.

## Usage

### Running the FastAPI server locally

```bash
uvicorn app.main:app --reload --port 5001
```

The API will be available at `http://127.0.0.1:5001/`.

### Available Endpoints

* `GET /`
  Returns a simple status message.

* `POST /ask`
  Accepts a JSON payload: `{ "question": "Your natural language query here" }`
  Returns a JSON response with an answer generated by the AI agent based on news data.

* `POST /summarize`
  Accepts a JSON payload: `{ "text": "Long news article or text" }`
  Returns an abstractive summary of the provided text.

## Data Preprocessing

The news dataset is preprocessed with:

* Tokenization of headlines and short descriptions.
* Stop-word removal using scikit-learnâ€™s built-in English stop words.
* Extraction of entities and numeric values with regex.
* Addition of `year` field extracted from publication dates.
* Computation of text lengths for headlines and descriptions.

These enrichments enable more nuanced queries and analyses.

## Agent Architecture Highlights

* **Semantic Search:** Uses SentenceTransformer embeddings stored in Chroma vector DB for efficient similarity search.
* **Natural Language Querying:** Groq LLM generates pandas code snippets based on user queries, executed safely on the dataset.
* **Statistical Insights:** Returns distribution and count statistics for categories, authors, and publication years.
* **Summarization:** Supports both extractive and abstractive summarization for news content.

## Example Queries

* "How many news articles are in the U.S. NEWS category?"
* "Show me the top 5 authors by article count."
* "What is the distribution of news articles published each year?"
* "Summarize the following news article: \[...]"

## Development Notes

* The project requires Python 3.8+.
* The summarization feature uses Hugging Face transformers (`facebook/bart-large-cnn`).
* Ensure you have a valid Groq API key set as an environment variable.
* Logging is enabled for easier debugging.

## License

MIT License

---

If you want me to generate a `requirements.txt` based on your imports, just let me know!
